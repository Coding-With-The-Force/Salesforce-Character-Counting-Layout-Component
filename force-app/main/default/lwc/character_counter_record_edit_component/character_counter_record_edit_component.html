<!--
 - Created by gerry on 5/1/2022.
 -->

<!-- Character Counter Record Edit Component -->
<template>
	<lightning-record-edit-form object-api-name={objectApiName} record-id={recordId} onsubmit={saveData}>
		<template for:each={fieldDataCopy} for:item="field" for:index="index">
			<template if:true={field.isString}>
				<template if:false={field.noCharsLeft}>
					<lightning-input-field key={field.fieldApiName} field-name={field.fieldApiName} onchange={determineCharactersLeft} ></lightning-input-field>
				</template>
				<template if:true={field.noCharsLeft}>
					<lightning-input-field key={field.fieldApiName} field-name={field.fieldApiName} onchange={determineCharactersLeft} disabled="true"></lightning-input-field>
				</template>
				<template if:false={field.below25Chars}>
					<p key={field.fieldApiName}>{field.charactersRemaining} {CHARACTERS_REMAINING} out of {field.stringFieldLength}</p>
				</template>
				<template if:true={field.below25Chars}>
					<p style="color:red" key={field.fieldApiName}>{field.charactersRemaining} {CHARACTERS_REMAINING} out of {field.stringFieldLength}</p>
				</template>
			</template>
			<template if:false={field.isString}>
				<lightning-input-field key={field.fieldApiName} field-name={field.fieldApiName}></lightning-input-field>
			</template>
		</template>
		<div class="slds-grid_align-center">
			<lightning-button class="slds-p-around_medium" if:true={renderSaveButton} variant="brand" type="submit" name="Save" label="Save"></lightning-button>
			<lightning-button class="slds-p-around_medium" if:true={renderSaveButton} variant="brand-outline" label="Cancel" onclick={disableEditing}></lightning-button>
		</div>
	</lightning-record-edit-form>
</template>