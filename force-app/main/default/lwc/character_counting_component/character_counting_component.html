<!--
 - Created by gerry on 4/30/2022.
 -->

<!-- Character Counting Component -->
<template>
	<lightning-card class="card-background" if:true={displayAsIndependentSection} title={sectionHeader} variant="narrow" icon-name={iconName}>
		<c-character_counter_record_view_form if:true={notEditingAndDataRetrieved}
											  record-id={recordId}
											  object-api-name={objectApiName}
											  field-data={fieldData}
											  field-columns={fieldColumns}
											  render-edit-button={renderEditButton}
											  onenableedit={enableEditing}>
		</c-character_counter_record_view_form>
		<c-character_counter_record_edit_component if:true={userEditingOrCreating}
												   record-id={recordId}
												   object-api-name={objectApiName}
												   field-data={fieldData}
												   field-columns={fieldColumns}
												   character-warning-threshold={characterWarningThreshold}
												   render-save-button={renderSaveButton}
												   ondisableedit={disableEditing}
												   onupdatefielddata={updateFieldData}>
		</c-character_counter_record_edit_component>
	</lightning-card>

	<lightning-accordion if:true={displayAsFieldSection} class="accordion-background"
						 active-section-name={activeSections}
						 allow-multiple-sections-open>
		<lightning-accordion-section class="counting-accordion"
									 name={sectionHeader}
									 label={sectionHeader}>
			<c-character_counter_record_view_form if:true={notEditingAndDataRetrieved}
												  class="toggle"
												  record-id={recordId}
												  object-api-name={objectApiName}
												  field-data={fieldData}
												  field-columns={fieldColumns}
												  render-edit-button={renderEditButton}
												  onenableedit={enableEditing}>
			</c-character_counter_record_view_form>
			<c-character_counter_record_edit_component if:true={userEditingOrCreating}
													   class="toggle"
													   record-id={recordId}
													   object-api-name={objectApiName}
													   field-data={fieldData}
													   field-columns={fieldColumns}
													   character-warning-threshold={characterWarningThreshold}
													   render-save-button={renderSaveButton}
													   ondisableedit={disableEditing}
													   onupdatefielddata={updateFieldData}>
			</c-character_counter_record_edit_component>
		</lightning-accordion-section>
		<lightning-accordion-section class="slds-hidden"></lightning-accordion-section>
	</lightning-accordion>
</template>